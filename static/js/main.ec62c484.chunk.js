(this.webpackJsonpkiritoru=this.webpackJsonpkiritoru||[]).push([[0],{11:function(t,e,n){t.exports=n(19)},16:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(6),o=n.n(c),u=(n(16),n(7)),i=n(3),s=n.n(i),f=n(8),b=n(2),g=n(9),l=n(1),d=n(4),j=n(10),p=n.n(j),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150;if(t){var r=t.getContext("2d");if(r){var a=r.getImageData(0,0,t.width,t.height),c=r.getImageData(0,0,t.width,t.height);O(a),O(c),m(c),v(c,e),w(a,c),k(a,n),r.clearRect(0,0,t.width,t.height),r.putImageData(a,0,0,0,0,t.width,t.height)}}},O=function(t){for(var e=0;e<Math.floor(t.data.length/4);e++){var n=t.data[4*e],r=t.data[4*e+1],a=t.data[4*e+2],c=(Math.max(n,r,a)+Math.min(n,r,a))/2;t.data[4*e]=t.data[4*e+1]=t.data[4*e+2]=c}},m=function(t){for(var e=0;e<Math.floor(t.data.length/4);e++)t.data[4*e]=255-t.data[4*e],t.data[4*e+1]=255-t.data[4*e+1],t.data[4*e+2]=255-t.data[4*e+2]},v=function(t,e){p()(t.data,t.width,t.height,e)},w=function(t,e){for(var n=0;n<Math.floor(t.data.length/4);n++){var r=t.data[4*n]/255,a=e.data[4*n]/255,c=1===a?1:r/(1-a);t.data[4*n]=t.data[4*n+1]=t.data[4*n+2]=255*Math.min(1,c)}},k=function(t,e){for(var n=e/255,r=1-n,a=0;a<Math.floor(t.data.length/4);a++){var c=t.data[4*a]/255,o=0===n?1===c?1:0:c<=n?0:(c-n)/r;t.data[4*a]=t.data[4*a+1]=t.data[4*a+2]=255*o}},y=n(22);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(n,!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=function(t,e,n){return new Promise((function(r){t.toBlob(r,e,n)}))},E=function(){var t=Object(r.useRef)(null),e=Object(r.useRef)(""),n=Object(r.useMemo)((function(){return document.createElement("canvas")}),[]),c=Object(r.useRef)(!1),o=Object(y.a)("kiritoru_config",{jpg:!1,senga:!1}),u=Object(b.a)(o,2),i=u[0],j=u[1],p=Object(r.useState)(),O=Object(b.a)(p,2),m=O[0],v=O[1],w=Object(g.a)((function(t){c.current=!1,e.current=t[0].name.replace(/\..+$/,""),v(URL.createObjectURL(t[0]))})),k=Object(r.useCallback)((function(){t.current&&(c.current?t.current.pause():t.current.play(),c.current=!c.current)}),[]),x=Object(r.useCallback)((function(e){t.current&&(t.current.currentTime=t.current.currentTime+1/24*(e?1:-1))}),[]),E=Object(r.useCallback)((function(e){t.current&&(t.current.currentTime=t.current.currentTime+e)}),[]),T=Object(r.useCallback)((function(){return x(!0)}),[x]),M=Object(r.useCallback)((function(){return x(!1)}),[x]),D=Object(r.useCallback)((function(){return E(1)}),[E]),R=Object(r.useCallback)((function(){return E(-1)}),[E]),S=Object(r.useCallback)(Object(f.a)(s.a.mark((function r(){var a,c,o,u;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.current&&m){r.next=2;break}return r.abrupt("return");case 2:if(a=n.getContext("2d")){r.next=5;break}return r.abrupt("return");case 5:return n.width=t.current.videoWidth,n.height=t.current.videoHeight,a.drawImage(t.current,0,0),c="".concat(e.current,"_").concat(Math.floor(24*t.current.currentTime)),r.next=11,C(n,i.jpg?"image/jpeg":"image/png",1);case 11:if((o=r.sent)&&t.current){r.next=14;break}return r.abrupt("return");case 14:if(Object(d.saveAs)(o,"".concat(c,".").concat(i.jpg?"jpg":"png")),!i.senga){r.next=23;break}return h(n),r.next=19,C(n,i.jpg?"image/jpeg":"image/png",1);case 19:if((u=r.sent)&&t.current){r.next=22;break}return r.abrupt("return");case 22:Object(d.saveAs)(u,"".concat(c,"_senga.").concat(i.jpg?"jpg":"png"));case 23:case"end":return r.stop()}}),r)}))),[n,i.jpg,i.senga,m]);Object(l.a)("space",k,[k]),Object(l.a)("o",w,[w]),Object(l.a)("left",M,[M]),Object(l.a)("right",T,[T]),Object(l.a)("shift+left",R,[R]),Object(l.a)("shift+right",D,[D]),Object(l.a)("c",S,[S]),Object(l.a)("t",(function(){j((function(t){return P({},t,{jpg:!t.jpg})}))}),[]),Object(l.a)("s",(function(){j((function(t){return P({},t,{senga:!t.senga})}))}),[]);var I=Object(r.useState)(!1),B=Object(b.a)(I,2),J=B[0],W=B[1];Object(r.useEffect)((function(){W(!0),G(!1);var t=window.setTimeout((function(){W(!1)}),1e3);return function(){return window.clearTimeout(t)}}),[i.jpg]);var _=Object(r.useState)(!1),A=Object(b.a)(_,2),F=A[0],G=A[1];return Object(r.useEffect)((function(){W(!1),G(!0);var t=window.setTimeout((function(){G(!1)}),1e3);return function(){return window.clearTimeout(t)}}),[i.senga]),a.a.createElement(a.a.Fragment,null,a.a.createElement("video",{ref:t,src:m,onClick:function(t){return t.currentTarget.blur()},onPlay:function(){c.current=!0},onPause:function(){c.current=!1},controls:!0,style:{width:"100%",height:"100%",background:"#000",objectFit:"contain"}}),a.a.createElement("div",{style:{position:"absolute",top:"10px",left:"10px",fontSize:"48px",color:"#fff",background:"rgba(0, 0, 0, 0.5)",pointerEvents:"none",padding:"0px 10px",opacity:J||F?"1":"0"}},F?i.senga?"\u7dda\u753b\u4fdd\u5b58":"\u7dda\u753b\u7121\u3057":i.jpg?"JPG":"PNG"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.ec62c484.chunk.js.map